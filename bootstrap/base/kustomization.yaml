apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- cluster-appproject.yaml
- bootstrap-application.yaml # manage self
- cluster-application.yaml

patches:
- target:
    kind: argoproj.io
    group: v1alpha1
    name: default
    namespace: openshift-gitops
  patch: |-
    - op: replace
      path: /spec/clusterResourceWhitelist
      value: []
    - op: replace
      path: /spec/namespaceResourceWhitelist
      value: []
    - op: replace
      path: /spec/clusterResourceBlacklist
      value:
        - group: '*'
          kind: '*'
    - op: replace
      path: /spec/namespaceResourceBlacklist
      value:
        - group: '*'
          kind: '*'
    - op: replace
      path: /spec/sourceRepos
      value: []
